{"ast":null,"code":"var _jsxFileName = \"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Table, Button, Modal, ProgressBar } from \"react-bootstrap\";\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\n\nconst Inicio = () => {\n  var _selectedPersona$tuto;\n\n  const [personas, setPersonas] = useState([]);\n  const [searchPersona, setSearchPersona] = useState(\"\");\n  const [selectedPersona, setSelectedPersona] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const userContext = useContext(UserContext);\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = e => {\n    setSearchPersona(e.target.value);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas().then(response => {\n      setPersonas(response.data);\n      updateProgress(response.data.length);\n    }).catch(e => console.log(e));\n  };\n\n  const updateProgress = total => {\n    const maxPersonas = 50;\n    setProgress(Math.min(total / maxPersonas * 100, 100));\n  };\n\n  const removePersona = persona => {\n    if (!persona || !persona.id) {\n      console.error(\"Persona o persona.id no válidos\", persona);\n      return;\n    }\n\n    AgendaDataService.deletePersona(persona.id).then(() => retrievePersonas()).catch(e => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      retrievePersonas();\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona).then(response => setPersonas(response.data)).catch(e => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  const handleRowClick = persona => {\n    setSelectedPersona(persona);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(ProgressBar, {\n    animated: true,\n    now: progress,\n    label: `${Math.round(progress)}%`,\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"mb-3 d-flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Buscar por nombre\",\n    value: searchPersona,\n    onChange: onChangeSearchPersona,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: searchPersonaFunction,\n    className: \"btn btn-primary ml-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Buscar\")), React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    responsive: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Nombre\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Direcci\\xF3n\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Ciudad\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Fecha de Nacimiento\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Tutoriales\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Acciones\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, personas.map(persona => {\n    var _persona$tutoriales;\n\n    return React.createElement(\"tr\", {\n      key: persona.id,\n      onClick: () => handleRowClick(persona),\n      style: {\n        cursor: \"pointer\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, persona.nombre, \" \", persona.apellido), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, persona.direccion), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, persona.ciudad), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, persona.fechaNacimiento), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, ((_persona$tutoriales = persona.tutoriales) === null || _persona$tutoriales === void 0 ? void 0 : _persona$tutoriales.length) > 0 ? persona.tutoriales.join(\", \") : \"Ninguno\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, userContext && React.createElement(React.Fragment, null, React.createElement(Link, {\n      to: `/editar/${persona.id}`,\n      className: \"btn btn-warning btn-sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: editar,\n      alt: \"Editar\",\n      className: \"icon-btn\",\n      style: iconStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    })), React.createElement(Button, {\n      variant: \"danger\",\n      size: \"sm\",\n      onClick: e => {\n        e.stopPropagation();\n        removePersona(persona);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: borrar,\n      alt: \"Eliminar\",\n      className: \"icon-btn\",\n      style: iconStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(Link, {\n      to: {\n        pathname: `/tutoriales/`,\n        state: {\n          tutoriales: persona.tutoriales || []\n        }\n      },\n      className: \"btn btn-success btn-sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: informacion,\n      alt: \"Tutoriales\",\n      className: \"icon-btn\",\n      style: iconStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    })))));\n  }))), React.createElement(Modal, {\n    show: selectedPersona,\n    onHide: () => setSelectedPersona(null),\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Detalles de \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.nombre)), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Direcci\\xF3n:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.direccion), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Ciudad:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.ciudad), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Fecha de Nacimiento:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.fechaNacimiento), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Tutoriales:\"), \" \", (selectedPersona === null || selectedPersona === void 0 ? void 0 : (_selectedPersona$tuto = selectedPersona.tutoriales) === null || _selectedPersona$tuto === void 0 ? void 0 : _selectedPersona$tuto.length) > 0 ? selectedPersona.tutoriales.join(\", \") : \"Ninguno\")), React.createElement(Modal.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, userContext && React.createElement(React.Fragment, null, React.createElement(Link, {\n    to: `/editar/${selectedPersona.id}`,\n    className: \"btn btn-warning\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Editar\"), React.createElement(Button, {\n    variant: \"danger\",\n    onClick: () => {\n      removePersona(selectedPersona);\n      setSelectedPersona(null);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Eliminar\")))));\n};\n\nconst iconStyle = {\n  width: \"20px\",\n  height: \"20px\",\n  objectFit: \"contain\"\n};\nexport default Inicio;","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js"],"names":["React","useContext","useState","useEffect","AgendaDataService","Link","Table","Button","Modal","ProgressBar","informacion","editar","borrar","UserContext","Inicio","personas","setPersonas","searchPersona","setSearchPersona","selectedPersona","setSelectedPersona","progress","setProgress","userContext","retrievePersonas","onChangeSearchPersona","e","target","value","getAllPersonas","then","response","data","updateProgress","length","catch","console","log","total","maxPersonas","Math","min","removePersona","persona","id","error","deletePersona","searchPersonaFunction","trim","findByNombre","handleRowClick","round","map","cursor","nombre","apellido","direccion","ciudad","fechaNacimiento","tutoriales","join","iconStyle","stopPropagation","pathname","state","width","height","objectFit"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Table, Button, Modal, ProgressBar } from \"react-bootstrap\";\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\n\nconst Inicio = () => {\n  const [personas, setPersonas] = useState([]);\n  const [searchPersona, setSearchPersona] = useState(\"\");\n  const [selectedPersona, setSelectedPersona] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const userContext = useContext(UserContext);\n\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = (e) => {\n    setSearchPersona(e.target.value);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas()\n      .then((response) => {\n        setPersonas(response.data);\n        updateProgress(response.data.length);\n      })\n      .catch((e) => console.log(e));\n  };\n\n  const updateProgress = (total) => {\n    const maxPersonas = 50;\n    setProgress(Math.min((total / maxPersonas) * 100, 100));\n  };\n\n  const removePersona = (persona) => {\n    if (!persona || !persona.id) {\n      console.error(\"Persona o persona.id no válidos\", persona);\n      return;\n    }\n\n    AgendaDataService.deletePersona(persona.id)\n      .then(() => retrievePersonas())\n      .catch((e) => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      retrievePersonas();\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona)\n      .then((response) => setPersonas(response.data))\n      .catch((e) => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  const handleRowClick = (persona) => {\n    setSelectedPersona(persona);\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <ProgressBar animated now={progress} label={`${Math.round(progress)}%`} className=\"mb-4\" />\n      \n      <div className=\"mb-3 d-flex\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Buscar por nombre\"\n          value={searchPersona}\n          onChange={onChangeSearchPersona}\n        />\n        <Button onClick={searchPersonaFunction} className=\"btn btn-primary ml-2\">Buscar</Button>\n      </div>\n\n      <Table striped bordered hover responsive>\n        <thead>\n          <tr>\n            <th>Nombre</th>\n            <th>Dirección</th>\n            <th>Ciudad</th>\n            <th>Fecha de Nacimiento</th>\n            <th>Tutoriales</th>\n            <th>Acciones</th>\n          </tr>\n        </thead>\n        <tbody>\n          {personas.map((persona) => (\n            <tr key={persona.id} onClick={() => handleRowClick(persona)} style={{ cursor: \"pointer\" }}>\n              <td>{persona.nombre} {persona.apellido}</td>\n              <td>{persona.direccion}</td>\n              <td>{persona.ciudad}</td>\n              <td>{persona.fechaNacimiento}</td>\n              <td>{persona.tutoriales?.length > 0 ? persona.tutoriales.join(\", \") : \"Ninguno\"}</td>\n              <td>\n                {userContext && (\n                  <>\n                    <Link to={`/editar/${persona.id}`} className=\"btn btn-warning btn-sm\">\n                      <img src={editar} alt=\"Editar\" className=\"icon-btn\" style={iconStyle} />\n                    </Link>\n                    <Button variant=\"danger\" size=\"sm\" onClick={(e) => { e.stopPropagation(); removePersona(persona); }}>\n                      <img src={borrar} alt=\"Eliminar\" className=\"icon-btn\" style={iconStyle} />\n                    </Button>\n                    <Link to={{ pathname: `/tutoriales/`, state: { tutoriales: persona.tutoriales || [] } }} className=\"btn btn-success btn-sm\">\n                      <img src={informacion} alt=\"Tutoriales\" className=\"icon-btn\" style={iconStyle} />\n                    </Link>\n                  </>\n                )}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n\n      {/* Modal for Persona Details */}\n      <Modal show={selectedPersona} onHide={() => setSelectedPersona(null)} centered>\n        <Modal.Header closeButton>\n          <Modal.Title>Detalles de {selectedPersona?.nombre}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p><strong>Dirección:</strong> {selectedPersona?.direccion}</p>\n          <p><strong>Ciudad:</strong> {selectedPersona?.ciudad}</p>\n          <p><strong>Fecha de Nacimiento:</strong> {selectedPersona?.fechaNacimiento}</p>\n          <p><strong>Tutoriales:</strong> {selectedPersona?.tutoriales?.length > 0 ? selectedPersona.tutoriales.join(\", \") : \"Ninguno\"}</p>\n        </Modal.Body>\n        <Modal.Footer>\n          {userContext && (\n            <>\n              <Link to={`/editar/${selectedPersona.id}`} className=\"btn btn-warning\">\n                Editar\n              </Link>\n              <Button variant=\"danger\" onClick={() => { removePersona(selectedPersona); setSelectedPersona(null); }}>\n                Eliminar\n              </Button>\n            </>\n          )}\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n};\n\nconst iconStyle = {\n  width: \"20px\",\n  height: \"20px\",\n  objectFit: \"contain\",\n};\n\nexport default Inicio;\n"]},"metadata":{},"sourceType":"module"}