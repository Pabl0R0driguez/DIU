{"ast":null,"code":"import _regeneratorRuntime from\"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{initializeApp}from\"firebase/app\";import{getAuth,GoogleAuthProvider,signInWithPopup,signInWithEmailAndPassword}from\"firebase/auth\";import{getFirestore,doc,getDoc,setDoc}from\"firebase/firestore\";// Configuración de Firebase\nvar firebaseConfig={apiKey:\"AIzaSyBbMgMiFEvuerhGK1f8L-sHNrRE4ZVF6KQ\",authDomain:\"loginproyectofinal-f76cb.firebaseapp.com\",projectId:\"loginproyectofinal-f76cb\",storageBucket:\"loginproyectofinal-f76cb.appspot.com\",messagingSenderId:\"991930152122\",appId:\"1:991930152122:web:fdf48ac05af4fa40067e83\",measurementId:\"G-41K341S8RX\"};// Inicializar Firebase\nvar app=initializeApp(firebaseConfig);// Obtener la autenticación y la base de datos\nvar auth=getAuth(app);var db=getFirestore(app);// Proveedor de Google\nvar googleProvider=new GoogleAuthProvider();// Función para iniciar sesión con Google\nvar signInWithGoogle=function signInWithGoogle(){return signInWithPopup(auth,googleProvider);};// Función para iniciar sesión con email y contraseña \nvar signInWithEmail=function signInWithEmail(email,password){return signInWithEmailAndPassword(auth,email,password);};// Función para crear documento del usuario\nvar generateUserDocument=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth,additionalData){var userRef,userSnap,email,displayName,photoURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userAuth){_context.next=2;break;}return _context.abrupt(\"return\",null);case 2:userRef=doc(db,\"users\",userAuth.uid);/* Obternener persona de la base de datos */_context.next=5;return getDoc(userRef);case 5:userSnap=_context.sent;if(userSnap.exists()){_context.next=16;break;}email=userAuth.email,displayName=userAuth.displayName,photoURL=userAuth.photoURL;_context.prev=8;_context.next=11;return setDoc(userRef,_objectSpread({displayName:displayName,email:email,photoURL:photoURL},additionalData));case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);console.error(\"Error creando documento de usuario\",_context.t0);case 16:return _context.abrupt(\"return\",userSnap.data());case 17:case\"end\":return _context.stop();}}},_callee,null,[[8,13]]);}));return function generateUserDocument(_x,_x2){return _ref.apply(this,arguments);};}();// Exportar funciones\nexport{auth,db,signInWithGoogle,signInWithEmail,generateUserDocument};","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/firebase.js"],"names":["initializeApp","getAuth","GoogleAuthProvider","signInWithPopup","signInWithEmailAndPassword","getFirestore","doc","getDoc","setDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","googleProvider","signInWithGoogle","signInWithEmail","email","password","generateUserDocument","userAuth","additionalData","userRef","uid","userSnap","exists","displayName","photoURL","console","error","data"],"mappings":"kqBAAA,OAASA,aAAT,KAA8B,cAA9B,CACA,OACEC,OADF,CAEEC,kBAFF,CAGEC,eAHF,CAIEC,0BAJF,KAKO,eALP,CAMA,OAASC,YAAT,CAAuBC,GAAvB,CAA4BC,MAA5B,CAAoCC,MAApC,KAAkD,oBAAlD,CAEA;AACA,GAAMC,CAAAA,cAAc,CAAG,CACrBC,MAAM,CAAE,yCADa,CAErBC,UAAU,CAAE,0CAFS,CAGrBC,SAAS,CAAE,0BAHU,CAIrBC,aAAa,CAAE,sCAJM,CAKrBC,iBAAiB,CAAE,cALE,CAMrBC,KAAK,CAAE,2CANc,CAOrBC,aAAa,CAAE,cAPM,CAAvB,CAUA;AACA,GAAMC,CAAAA,GAAG,CAAGjB,aAAa,CAACS,cAAD,CAAzB,CAEA;AACA,GAAMS,CAAAA,IAAI,CAAGjB,OAAO,CAACgB,GAAD,CAApB,CACA,GAAME,CAAAA,EAAE,CAAGd,YAAY,CAACY,GAAD,CAAvB,CAEA;AACA,GAAMG,CAAAA,cAAc,CAAG,GAAIlB,CAAAA,kBAAJ,EAAvB,CAEA;AACA,GAAMmB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,SAAMlB,CAAAA,eAAe,CAACe,IAAD,CAAOE,cAAP,CAArB,EAAzB,CAEA;AACA,GAAME,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAQC,QAAR,QACtBpB,CAAAA,0BAA0B,CAACc,IAAD,CAAOK,KAAP,CAAcC,QAAd,CADJ,EAAxB,CAGA;AACA,GAAMC,CAAAA,oBAAoB,0FAAG,iBAAOC,QAAP,CAAiBC,cAAjB,qKACtBD,QADsB,yDACL,IADK,SAGrBE,OAHqB,CAGXtB,GAAG,CAACa,EAAD,CAAK,OAAL,CAAcO,QAAQ,CAACG,GAAvB,CAHQ,CAI3B,4CAJ2B,sBAKJtB,CAAAA,MAAM,CAACqB,OAAD,CALF,QAKrBE,QALqB,kBAQtBA,QAAQ,CAACC,MAAT,EARsB,0BASjBR,KATiB,CASgBG,QAThB,CASjBH,KATiB,CASVS,WATU,CASgBN,QAThB,CASVM,WATU,CASGC,QATH,CASgBP,QAThB,CASGO,QATH,wCAWjBzB,CAAAA,MAAM,CAACoB,OAAD,gBACVI,WAAW,CAAXA,WADU,CAEVT,KAAK,CAALA,KAFU,CAGVU,QAAQ,CAARA,QAHU,EAIPN,cAJO,EAXW,0FAkBvBO,OAAO,CAACC,KAAR,CAAc,oCAAd,cAlBuB,wCAsBpBL,QAAQ,CAACM,IAAT,EAtBoB,uEAAH,kBAApBX,CAAAA,oBAAoB,gDAA1B,CAyBA;AACA,OAASP,IAAT,CAAeC,EAAf,CAAmBE,gBAAnB,CAAqCC,eAArC,CAAsDG,oBAAtD","sourcesContent":["import { initializeApp } from \"firebase/app\"; \nimport { \n  getAuth, \n  GoogleAuthProvider, \n  signInWithPopup, \n  signInWithEmailAndPassword \n} from \"firebase/auth\"; \nimport { getFirestore, doc, getDoc, setDoc } from \"firebase/firestore\"; \n\n// Configuración de Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBbMgMiFEvuerhGK1f8L-sHNrRE4ZVF6KQ\",\n  authDomain: \"loginproyectofinal-f76cb.firebaseapp.com\",\n  projectId: \"loginproyectofinal-f76cb\",\n  storageBucket: \"loginproyectofinal-f76cb.appspot.com\",\n  messagingSenderId: \"991930152122\",\n  appId: \"1:991930152122:web:fdf48ac05af4fa40067e83\",\n  measurementId: \"G-41K341S8RX\"\n};\n\n// Inicializar Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Obtener la autenticación y la base de datos\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Proveedor de Google\nconst googleProvider = new GoogleAuthProvider();\n\n// Función para iniciar sesión con Google\nconst signInWithGoogle = () => signInWithPopup(auth, googleProvider);\n\n// Función para iniciar sesión con email y contraseña \nconst signInWithEmail = (email, password) => \n  signInWithEmailAndPassword(auth, email, password);\n\n// Función para crear documento del usuario\nconst generateUserDocument = async (userAuth, additionalData) => {\n  if (!userAuth) return null;\n\n  const userRef = doc(db, \"users\", userAuth.uid);\n  /* Obternener persona de la base de datos */\n  const userSnap = await getDoc(userRef);\n\n  // Si el documento no existe, lo creamos\n  if (!userSnap.exists()) {\n    const { email, displayName, photoURL } = userAuth;\n    try {\n      await setDoc(userRef, {\n        displayName,\n        email,\n        photoURL,\n        ...additionalData\n      });\n    } catch (error) {\n      console.error(\"Error creando documento de usuario\", error);\n    }\n  }\n\n  return userSnap.data();\n};\n\n// Exportar funciones\nexport { auth, db, signInWithGoogle, signInWithEmail, generateUserDocument };\n"]},"metadata":{},"sourceType":"module"}