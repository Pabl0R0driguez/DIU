{"ast":null,"code":"var _jsxFileName = \"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Modal, Button, Container, Row, Col, Form, Collapse, ProgressBar } from \"react-bootstrap\";\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\n\nconst Inicio = () => {\n  var _selectedPersona$tuto;\n\n  const [personas, setPersonas] = useState([]);\n  const [searchPersona, setSearchPersona] = useState(\"\");\n  const [selectedPersona, setSelectedPersona] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const userContext = useContext(UserContext);\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = e => {\n    setSearchPersona(e.target.value);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas().then(response => {\n      setPersonas(response.data);\n      updateProgress(response.data.length);\n    }).catch(e => console.log(e));\n  };\n\n  const updateProgress = total => {\n    const maxPersonas = 50;\n    setProgress(Math.min(total / maxPersonas * 100, 100));\n  };\n\n  const removePersona = persona => {\n    if (!persona || !persona.id) {\n      console.error(\"Persona o persona.id no válidos\", persona);\n      return;\n    }\n\n    AgendaDataService.deletePersona(persona.id).then(() => retrievePersonas()).catch(e => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      retrievePersonas();\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona).then(response => setPersonas(response.data)).catch(e => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  const handlePersonaClick = persona => {\n    setSelectedPersona(persona);\n  };\n\n  const closeModal = () => {\n    setSelectedPersona(null);\n  };\n\n  return React.createElement(Container, {\n    className: \"mt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Progreso de Tutoriales\"), React.createElement(ProgressBar, {\n    animated: true,\n    now: progress,\n    label: `${Math.round(progress)}%`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }))), React.createElement(Row, {\n    className: \"mb-3 align-items-center buscador-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"d-flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Buscar por nombre\",\n    value: searchPersona,\n    onChange: onChangeSearchPersona,\n    className: \"form-control-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(Button, {\n    variant: \"primary\",\n    size: \"sm\",\n    className: \"buscador-btn\",\n    onClick: searchPersonaFunction,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Buscar\")))), React.createElement(Row, {\n    className: \"mt-2 lista-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, personas.map(persona => React.createElement(\"li\", {\n    key: persona.id,\n    className: \"list-group-item\",\n    style: {\n      cursor: \"pointer\"\n    },\n    onClick: () => handlePersonaClick(persona),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, persona.nombre, \" \", persona.apellido))))), React.createElement(Modal, {\n    show: selectedPersona !== null,\n    onHide: closeModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Detalles de \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.nombre, \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.apellido)), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"detail-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Direcci\\xF3n:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.direccion), React.createElement(\"div\", {\n    className: \"detail-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"C\\xF3digo Postal:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.codigoPostal), React.createElement(\"div\", {\n    className: \"detail-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Ciudad:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.ciudad), React.createElement(\"div\", {\n    className: \"detail-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Fecha de Nacimiento:\"), \" \", selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.fechaNacimiento), React.createElement(\"div\", {\n    className: \"detail-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Tutoriales:\"), \" \", (selectedPersona === null || selectedPersona === void 0 ? void 0 : (_selectedPersona$tuto = selectedPersona.tutoriales) === null || _selectedPersona$tuto === void 0 ? void 0 : _selectedPersona$tuto.length) > 0 ? selectedPersona === null || selectedPersona === void 0 ? void 0 : selectedPersona.tutoriales.join(\", \") : \"Ninguno\")), React.createElement(Modal.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, !userContext ? null : React.createElement(React.Fragment, null, React.createElement(Link, {\n    to: `/editar/${selectedPersona.id}`,\n    className: \"btn btn-sm square-btn\",\n    style: btnStyle(\"#ffc107\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: editar,\n    alt: \"Editar\",\n    className: \"icon-btn\",\n    style: iconStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  })), React.createElement(Button, {\n    variant: \"danger\",\n    className: \"btn-sm square-btn\",\n    onClick: () => {\n      removePersona(selectedPersona);\n      closeModal();\n    },\n    style: btnStyle(\"#d32f2f\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: borrar,\n    alt: \"Eliminar\",\n    className: \"icon-btn\",\n    style: iconStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })), React.createElement(Link, {\n    to: {\n      pathname: `/tutoriales/`,\n      state: {\n        tutoriales: selectedPersona.tutoriales || []\n      }\n    },\n    className: \"btn btn-sm square-btn\",\n    style: btnStyle(\"#4caf50\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: informacion,\n    alt: \"Tutoriales\",\n    className: \"icon-btn\",\n    style: iconStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }))))));\n};\n\nconst btnStyle = bgColor => ({\n  backgroundColor: bgColor,\n  border: \"none\",\n  width: \"50px\",\n  height: \"50px\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nconst iconStyle = {\n  width: \"80%\",\n  height: \"80%\",\n  objectFit: \"contain\"\n};\nexport default Inicio;","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js"],"names":["React","useContext","useState","useEffect","AgendaDataService","Link","Modal","Button","Container","Row","Col","Form","Collapse","ProgressBar","informacion","editar","borrar","UserContext","Inicio","personas","setPersonas","searchPersona","setSearchPersona","selectedPersona","setSelectedPersona","progress","setProgress","userContext","retrievePersonas","onChangeSearchPersona","e","target","value","getAllPersonas","then","response","data","updateProgress","length","catch","console","log","total","maxPersonas","Math","min","removePersona","persona","id","error","deletePersona","searchPersonaFunction","trim","findByNombre","handlePersonaClick","closeModal","round","map","cursor","nombre","apellido","direccion","codigoPostal","ciudad","fechaNacimiento","tutoriales","join","btnStyle","iconStyle","pathname","state","bgColor","backgroundColor","border","width","height","display","justifyContent","alignItems","objectFit"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Modal, Button, Container, Row, Col, Form, Collapse, ProgressBar } from \"react-bootstrap\";\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\n\nconst Inicio = () => {\n  const [personas, setPersonas] = useState([]);\n  const [searchPersona, setSearchPersona] = useState(\"\");\n  const [selectedPersona, setSelectedPersona] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const userContext = useContext(UserContext);\n\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = (e) => {\n    setSearchPersona(e.target.value);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas()\n      .then((response) => {\n        setPersonas(response.data);\n        updateProgress(response.data.length);\n      })\n      .catch((e) => console.log(e));\n  };\n\n  const updateProgress = (total) => {\n    const maxPersonas = 50;\n    setProgress(Math.min((total / maxPersonas) * 100, 100));\n  };\n\n  const removePersona = (persona) => {\n    if (!persona || !persona.id) {\n      console.error(\"Persona o persona.id no válidos\", persona);\n      return;\n    }\n\n    AgendaDataService.deletePersona(persona.id)\n      .then(() => retrievePersonas())\n      .catch((e) => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      retrievePersonas();\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona)\n      .then((response) => setPersonas(response.data))\n      .catch((e) => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  const handlePersonaClick = (persona) => {\n    setSelectedPersona(persona);\n  };\n\n  const closeModal = () => {\n    setSelectedPersona(null);\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <Row className=\"mb-4\">\n        <Col md={12}>\n          <h4 className=\"text-center\">Progreso de Tutoriales</h4>\n          <ProgressBar animated now={progress} label={`${Math.round(progress)}%`} />\n        </Col>\n      </Row>\n\n      <Row className=\"mb-3 align-items-center buscador-container\">\n        <Col md={12}>\n          <div className=\"d-flex\">\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Buscar por nombre\"\n              value={searchPersona}\n              onChange={onChangeSearchPersona}\n              className=\"form-control-lg\"\n            />\n            <Button variant=\"primary\" size=\"sm\" className=\"buscador-btn\" onClick={searchPersonaFunction}>\n              Buscar\n            </Button>\n          </div>\n        </Col>\n      </Row>\n\n      <Row className=\"mt-2 lista-container\">\n        <ul className=\"list-group\">\n          {personas.map((persona) => (\n            <li\n              key={persona.id}\n              className=\"list-group-item\"\n              style={{ cursor: \"pointer\" }}\n              onClick={() => handlePersonaClick(persona)}\n            >\n              <strong>{persona.nombre} {persona.apellido}</strong>\n            </li>\n          ))}\n        </ul>\n      </Row>\n\n      {/* Modal para mostrar los detalles de la persona */}\n      <Modal show={selectedPersona !== null} onHide={closeModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Detalles de {selectedPersona?.nombre} {selectedPersona?.apellido}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"detail-item\"><strong>Dirección:</strong> {selectedPersona?.direccion}</div>\n          <div className=\"detail-item\"><strong>Código Postal:</strong> {selectedPersona?.codigoPostal}</div>\n          <div className=\"detail-item\"><strong>Ciudad:</strong> {selectedPersona?.ciudad}</div>\n          <div className=\"detail-item\"><strong>Fecha de Nacimiento:</strong> {selectedPersona?.fechaNacimiento}</div>\n          <div className=\"detail-item\">\n            <strong>Tutoriales:</strong> {selectedPersona?.tutoriales?.length > 0 ? selectedPersona?.tutoriales.join(\", \") : \"Ninguno\"}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          {!userContext ? null : (\n            <>\n              <Link to={`/editar/${selectedPersona.id}`} className=\"btn btn-sm square-btn\" style={btnStyle(\"#ffc107\")}>\n                <img src={editar} alt=\"Editar\" className=\"icon-btn\" style={iconStyle} />\n              </Link>\n              <Button variant=\"danger\" className=\"btn-sm square-btn\" onClick={() => { removePersona(selectedPersona); closeModal(); }} style={btnStyle(\"#d32f2f\")}>\n                <img src={borrar} alt=\"Eliminar\" className=\"icon-btn\" style={iconStyle} />\n              </Button>\n              <Link to={{ pathname: `/tutoriales/`, state: { tutoriales: selectedPersona.tutoriales || [] } }} className=\"btn btn-sm square-btn\" style={btnStyle(\"#4caf50\")}>\n                <img src={informacion} alt=\"Tutoriales\" className=\"icon-btn\" style={iconStyle} />\n              </Link>\n            </>\n          )}\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n};\n\nconst btnStyle = (bgColor) => ({\n  backgroundColor: bgColor,\n  border: \"none\",\n  width: \"50px\",\n  height: \"50px\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n});\n\nconst iconStyle = {\n  width: \"80%\",\n  height: \"80%\",\n  objectFit: \"contain\",\n};\n\nexport default Inicio;\n"]},"metadata":{},"sourceType":"module"}