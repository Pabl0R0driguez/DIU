{"ast":null,"code":"var _jsxFileName = \"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/A\\xF1adir.js\";\nimport React, { useState, useEffect } from 'react';\nimport AgendaDataService from '../services/agenda.service';\nimport TutorialDataService from '../services/tutorial.service';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Button, Row, Col, Container, Card, Modal } from 'react-bootstrap';\nimport \"../styles/Añadir.css\";\n\nfunction Añadir() {\n  const [persona, setPersona] = useState({\n    nombre: '',\n    apellido: '',\n    direccion: '',\n    codigoPostal: '',\n    ciudad: '',\n    fechaNacimiento: '',\n    tutoriales: []\n  });\n  const [availableTutorials, setAvailableTutorials] = useState([]);\n  const [selectedTutorials, setSelectedTutorials] = useState([]);\n  const [showTutorialModal, setShowTutorialModal] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    TutorialDataService.getAllTutorials().then(response => {\n      setAvailableTutorials(response.data);\n    }).catch(error => {\n      console.error('Error al cargar tutoriales:', error);\n    });\n  }, []);\n\n  const agregarPersona = e => {\n    e.preventDefault();\n    const personaData = { ...persona,\n      tutoriales: selectedTutorials.map(tut => tut.title)\n    };\n\n    if (!personaData.fechaNacimiento) {\n      console.log(\"Error: La fecha de nacimiento es obligatoria.\");\n      return;\n    }\n\n    AgendaDataService.createPersona(personaData).then(response => {\n      history.push(\"/\");\n      console.log('Persona agregada:', response.data);\n    }).catch(error => {\n      console.error('Error al agregar persona:', error);\n    });\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPersona({ ...persona,\n      [name]: value\n    });\n  };\n\n  const toggleTutorialSelection = tutorialId => {\n    const tutorial = availableTutorials.find(tut => tut.id === tutorialId);\n\n    if (tutorial) {\n      if (selectedTutorials.some(tut => tut.id === tutorialId)) {\n        setSelectedTutorials(selectedTutorials.filter(tut => tut.id !== tutorialId));\n      } else {\n        setSelectedTutorials([...selectedTutorials, tutorial]);\n      }\n    }\n  };\n\n  const openTutorialModal = () => setShowTutorialModal(true);\n\n  const closeTutorialModal = () => setShowTutorialModal(false);\n\n  return React.createElement(Container, {\n    className: \"contenedor-formulario\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"formulario-card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"titulo-formulario\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"A\\xF1adir Persona\"), React.createElement(Form, {\n    onSubmit: agregarPersona,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"nombre\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Nombre\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce nombre\",\n    name: \"nombre\",\n    value: persona.nombre,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"apellido\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Apellido\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce apellido\",\n    name: \"apellido\",\n    value: persona.apellido,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }))), React.createElement(Form.Group, {\n    controlId: \"direccion\",\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Direcci\\xF3n\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce direcci\\xF3n\",\n    name: \"direccion\",\n    value: persona.direccion,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(Row, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"codigoPostal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"C\\xF3digo Postal\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce c\\xF3digo postal\",\n    name: \"codigoPostal\",\n    value: persona.codigoPostal,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"ciudad\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Ciudad\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce ciudad\",\n    name: \"ciudad\",\n    value: persona.ciudad,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }))), React.createElement(Form.Group, {\n    controlId: \"fechaNacimiento\",\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Fecha de Nacimiento\"), React.createElement(Form.Control, {\n    type: \"date\",\n    name: \"fechaNacimiento\",\n    value: persona.fechaNacimiento,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Tutoriales asignados\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, selectedTutorials.length > 0 ? `Seleccionados: ${selectedTutorials.map(tut => tut.title).join(\", \")}` : \"Ningún tutorial seleccionado\"), React.createElement(Button, {\n    className: \"button-custom mt-2\",\n    onClick: openTutorialModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Seleccionar Tutoriales\")), React.createElement(Button, {\n    type: \"submit\",\n    className: \"boton-enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"A\\xF1adir\"))), React.createElement(Modal, {\n    show: showTutorialModal,\n    onHide: closeTutorialModal,\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Seleccionar Tutoriales\")), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"tutorials-grid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, availableTutorials.map(tutorial => React.createElement(\"div\", {\n    key: tutorial.id,\n    className: `tutorial-card ${selectedTutorials.some(tut => tut.id === tutorial.id) ? \"selected\" : \"\"}`,\n    onClick: () => toggleTutorialSelection(tutorial.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: tutorial.url || \"https://via.placeholder.com/80\",\n    alt: tutorial.title,\n    className: \"tutorial-img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"tutorial-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, tutorial.title), React.createElement(\"p\", {\n    className: \"tutorial-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, tutorial.description || \"Sin descripción\")))))), React.createElement(Modal.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"confirm-button\",\n    onClick: closeTutorialModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Confirmar selecci\\xF3n\"))));\n}\n\nexport default Añadir;","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Añadir.js"],"names":["React","useState","useEffect","AgendaDataService","TutorialDataService","useHistory","Form","Button","Row","Col","Container","Card","Modal","Añadir","persona","setPersona","nombre","apellido","direccion","codigoPostal","ciudad","fechaNacimiento","tutoriales","availableTutorials","setAvailableTutorials","selectedTutorials","setSelectedTutorials","showTutorialModal","setShowTutorialModal","history","getAllTutorials","then","response","data","catch","error","console","agregarPersona","e","preventDefault","personaData","map","tut","title","log","createPersona","push","handleChange","name","value","target","toggleTutorialSelection","tutorialId","tutorial","find","id","some","filter","openTutorialModal","closeTutorialModal","length","join","url","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport AgendaDataService from '../services/agenda.service';\nimport TutorialDataService from '../services/tutorial.service';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Button, Row, Col, Container, Card, Modal } from 'react-bootstrap';\nimport \"../styles/Añadir.css\";\n\nfunction Añadir() {\n  const [persona, setPersona] = useState({\n    nombre: '',\n    apellido: '',\n    direccion: '',\n    codigoPostal: '',\n    ciudad: '',\n    fechaNacimiento: '',\n    tutoriales: []\n  });\n\n  const [availableTutorials, setAvailableTutorials] = useState([]);\n  const [selectedTutorials, setSelectedTutorials] = useState([]);\n  const [showTutorialModal, setShowTutorialModal] = useState(false);\n  const history = useHistory();\n\n\n  useEffect(() => {\n    TutorialDataService.getAllTutorials()\n      .then((response) => {\n        setAvailableTutorials(response.data);\n      })\n      .catch((error) => {\n        console.error('Error al cargar tutoriales:', error);\n      });\n  }, []);\n\n  const agregarPersona = (e) => {\n    e.preventDefault();\n    const personaData = { ...persona, tutoriales: selectedTutorials.map(tut => tut.title) };\n\n    if (!personaData.fechaNacimiento) {\n      console.log(\"Error: La fecha de nacimiento es obligatoria.\");\n      return;\n    }\n\n    AgendaDataService.createPersona(personaData)\n      .then((response) => {\n        history.push(\"/\");\n        console.log('Persona agregada:', response.data);\n      })\n      .catch((error) => {\n        console.error('Error al agregar persona:', error);\n      });\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setPersona({ ...persona, [name]: value });\n  };\n\n  const toggleTutorialSelection = (tutorialId) => {\n    const tutorial = availableTutorials.find(tut => tut.id === tutorialId);\n    if (tutorial) {\n      if (selectedTutorials.some(tut => tut.id === tutorialId)) {\n        setSelectedTutorials(selectedTutorials.filter(tut => tut.id !== tutorialId));\n      } else {\n        setSelectedTutorials([...selectedTutorials, tutorial]);\n      }\n    }\n  };\n\n  const openTutorialModal = () => setShowTutorialModal(true);\n  const closeTutorialModal = () => setShowTutorialModal(false);\n\n  return (\n    <Container className=\"contenedor-formulario\">\n      <Card className=\"formulario-card\">\n        <h3 className=\"titulo-formulario\">Añadir Persona</h3>\n        <Form onSubmit={agregarPersona}>\n          <Row className=\"mb-4\">\n            <Form.Group as={Col} controlId=\"nombre\">\n              <Form.Label>Nombre</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce nombre\" name=\"nombre\" value={persona.nombre} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n            <Form.Group as={Col} controlId=\"apellido\">\n              <Form.Label>Apellido</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce apellido\" name=\"apellido\" value={persona.apellido} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n          </Row>\n\n          <Form.Group controlId=\"direccion\" className=\"mb-4\">\n            <Form.Label>Dirección</Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Introduce dirección\" name=\"direccion\" value={persona.direccion} onChange={handleChange} className=\"form-control-custom\" />\n          </Form.Group>\n\n          <Row className=\"mb-4\">\n            <Form.Group as={Col} controlId=\"codigoPostal\">\n              <Form.Label>Código Postal</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce código postal\" name=\"codigoPostal\" value={persona.codigoPostal} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n            <Form.Group as={Col} controlId=\"ciudad\">\n              <Form.Label>Ciudad</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce ciudad\" name=\"ciudad\" value={persona.ciudad} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n          </Row>\n\n          <Form.Group controlId=\"fechaNacimiento\" className=\"mb-4\">\n            <Form.Label>Fecha de Nacimiento</Form.Label>\n            <Form.Control type=\"date\" name=\"fechaNacimiento\" value={persona.fechaNacimiento} onChange={handleChange} className=\"form-control-custom\" />\n          </Form.Group>\n\n          <Form.Group className=\"mb-4\">\n            <Form.Label>Tutoriales asignados</Form.Label>\n            <div>{selectedTutorials.length > 0 ? `Seleccionados: ${selectedTutorials.map(tut => tut.title).join(\", \")}` : \"Ningún tutorial seleccionado\"}</div>\n            <Button className=\"button-custom mt-2\" onClick={openTutorialModal}>Seleccionar Tutoriales</Button>\n          </Form.Group>\n\n          <Button type=\"submit\" className=\"boton-enviar\">Añadir</Button>\n        </Form>\n      </Card>\n\n      <Modal show={showTutorialModal} onHide={closeTutorialModal} centered>\n        <Modal.Header closeButton>\n          <Modal.Title>Seleccionar Tutoriales</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"tutorials-grid\">\n            {availableTutorials.map((tutorial) => (\n              <div key={tutorial.id} className={`tutorial-card ${selectedTutorials.some(tut => tut.id === tutorial.id) ? \"selected\" : \"\"}`} onClick={() => toggleTutorialSelection(tutorial.id)}>\n                <img src={tutorial.url || \"https://via.placeholder.com/80\"} alt={tutorial.title} className=\"tutorial-img\" />\n                <div>\n                  <h5 className=\"tutorial-title\">{tutorial.title}</h5>\n                  <p className=\"tutorial-description\">{tutorial.description || \"Sin descripción\"}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button className=\"confirm-button\" onClick={closeTutorialModal}>Confirmar selección</Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n}\n\nexport default Añadir;\n"]},"metadata":{},"sourceType":"module"}