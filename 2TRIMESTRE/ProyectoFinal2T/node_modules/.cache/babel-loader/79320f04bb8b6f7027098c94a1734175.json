{"ast":null,"code":"var _jsxFileName = \"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/A\\xF1adir.js\";\nimport React, { useState, useEffect } from 'react';\nimport AgendaDataService from '../services/agenda.service';\nimport TutorialDataService from '../services/tutorial.service';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Button, Row, Col, Container, Card, Modal, Alert } from 'react-bootstrap';\nimport { CSSTransition } from 'react-transition-group'; // Para las animaciones\n\nimport \"../styles/Añadir-Editar.css\";\n\nfunction Añadir() {\n  const [persona, setPersona] = useState({\n    nombre: '',\n    apellido: '',\n    direccion: '',\n    codigoPostal: '',\n    ciudad: '',\n    fechaNacimiento: '',\n    tutoriales: []\n  });\n  const [availableTutorials, setAvailableTutorials] = useState([]);\n  const [selectedTutorials, setSelectedTutorials] = useState([]);\n  const [showTutorialModal, setShowTutorialModal] = useState(false);\n  const history = useHistory();\n  const [errorMessage, setErrorMessage] = useState('');\n  useEffect(() => {\n    TutorialDataService.getAllTutorials().then(response => {\n      setAvailableTutorials(response.data);\n    }).catch(error => {\n      console.error('Error al cargar tutoriales:', error);\n    });\n  }, []);\n\n  const agregarPersona = e => {\n    e.preventDefault();\n\n    if (!persona.nombre || !persona.apellido || !persona.direccion || !persona.codigoPostal || !persona.ciudad || !persona.fechaNacimiento) {\n      setErrorMessage(\"Error: Todos los campos son obligatorios.\");\n      return;\n    }\n\n    const personaData = { ...persona,\n      tutoriales: selectedTutorials.map(tut => tut.title)\n    };\n    AgendaDataService.createPersona(personaData).then(response => {\n      history.push(\"/\");\n      console.log('Persona agregada:', response.data);\n    }).catch(error => {\n      console.error('Error al agregar persona:', error);\n    });\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPersona({ ...persona,\n      [name]: value\n    });\n  };\n\n  const toggleTutorialSelection = tutorialId => {\n    const tutorial = availableTutorials.find(tut => tut.id === tutorialId);\n\n    if (tutorial) {\n      if (selectedTutorials.some(tut => tut.id === tutorialId)) {\n        setSelectedTutorials(selectedTutorials.filter(tut => tut.id !== tutorialId));\n      } else {\n        setSelectedTutorials([...selectedTutorials, tutorial]);\n      }\n    }\n  };\n\n  const openTutorialModal = () => setShowTutorialModal(true);\n\n  const closeTutorialModal = () => setShowTutorialModal(false);\n\n  return React.createElement(Container, {\n    className: \"contenedor-formulario\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"formulario-card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"titulo-formulario\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"A\\xF1adir Persona\"), React.createElement(Form, {\n    onSubmit: agregarPersona,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"nombre\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Nombre\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce nombre\",\n    name: \"nombre\",\n    value: persona.nombre,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"apellido\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Apellido\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce apellido\",\n    name: \"apellido\",\n    value: persona.apellido,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))), React.createElement(Form.Group, {\n    controlId: \"direccion\",\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Direcci\\xF3n\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce direcci\\xF3n\",\n    name: \"direccion\",\n    value: persona.direccion,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(Row, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"codigoPostal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"C\\xF3digo Postal\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce c\\xF3digo postal\",\n    name: \"codigoPostal\",\n    value: persona.codigoPostal,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"ciudad\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Ciudad\"), React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Introduce ciudad\",\n    name: \"ciudad\",\n    value: persona.ciudad,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }))), React.createElement(Form.Group, {\n    controlId: \"fechaNacimiento\",\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Fecha de Nacimiento\"), React.createElement(Form.Control, {\n    type: \"date\",\n    name: \"fechaNacimiento\",\n    value: persona.fechaNacimiento,\n    onChange: handleChange,\n    className: \"form-control-custom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Tutoriales asignados\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, selectedTutorials.length > 0 ? `Seleccionados: ${selectedTutorials.map(tut => tut.title).join(\", \")}` : \"Ningún tutorial seleccionado\"), React.createElement(Button, {\n    className: \"button-custom mt-2\",\n    onClick: openTutorialModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Seleccionar Tutoriales\")), React.createElement(Button, {\n    type: \"submit\",\n    className: \"boton-enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"A\\xF1adir\"), errorMessage && React.createElement(Alert, {\n    variant: \"danger\",\n    className: \"mt-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, errorMessage)))), React.createElement(CSSTransition, {\n    in: showTutorialModal,\n    timeout: 300,\n    classNames: \"fade\",\n    unmountOnExit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(Modal, {\n    show: showTutorialModal,\n    onHide: closeTutorialModal,\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Seleccionar Tutoriales\")), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"tutorials-grid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, availableTutorials.map(tutorial => React.createElement(\"div\", {\n    key: tutorial.id,\n    className: `tutorial-card ${selectedTutorials.some(tut => tut.id === tutorial.id) ? \"selected\" : \"\"}`,\n    onClick: () => toggleTutorialSelection(tutorial.id),\n    style: {\n      border: \"1px solid #ddd\",\n      borderRadius: \"10px\",\n      padding: \"10px\",\n      marginBottom: \"10px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      cursor: \"pointer\",\n      transition: \"0.3s\",\n      backgroundColor: selectedTutorials.some(tut => tut.id === tutorial.id) ? \"#f0f8ff\" : \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: tutorial.url || \"https://via.placeholder.com/80\" // Imagen por defecto si no hay URL\n    ,\n    alt: tutorial.title,\n    style: {\n      width: \"80px\",\n      height: \"80px\",\n      borderRadius: \"8px\",\n      marginRight: \"10px\",\n      objectFit: \"cover\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    style: {\n      margin: 0,\n      fontSize: \"16px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, tutorial.title), React.createElement(\"p\", {\n    style: {\n      fontSize: \"14px\",\n      color: \"#666\",\n      margin: \"5px 0 0\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, tutorial.description || \"Sin descripción\")))))), React.createElement(Modal.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"primary\",\n    onClick: closeTutorialModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, \"Confirmar selecci\\xF3n\")))));\n}\n\nexport default Añadir;","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Añadir.js"],"names":["React","useState","useEffect","AgendaDataService","TutorialDataService","useHistory","Form","Button","Row","Col","Container","Card","Modal","Alert","CSSTransition","Añadir","persona","setPersona","nombre","apellido","direccion","codigoPostal","ciudad","fechaNacimiento","tutoriales","availableTutorials","setAvailableTutorials","selectedTutorials","setSelectedTutorials","showTutorialModal","setShowTutorialModal","history","errorMessage","setErrorMessage","getAllTutorials","then","response","data","catch","error","console","agregarPersona","e","preventDefault","personaData","map","tut","title","createPersona","push","log","handleChange","name","value","target","toggleTutorialSelection","tutorialId","tutorial","find","id","some","filter","openTutorialModal","closeTutorialModal","length","join","border","borderRadius","padding","marginBottom","display","alignItems","cursor","transition","backgroundColor","url","width","height","marginRight","objectFit","margin","fontSize","color","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport AgendaDataService from '../services/agenda.service';\nimport TutorialDataService from '../services/tutorial.service';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Button, Row, Col, Container, Card, Modal, Alert } from 'react-bootstrap';\nimport { CSSTransition } from 'react-transition-group'; // Para las animaciones\nimport \"../styles/Añadir-Editar.css\";\n\nfunction Añadir() {\n  const [persona, setPersona] = useState({\n    nombre: '',\n    apellido: '',\n    direccion: '',\n    codigoPostal: '',\n    ciudad: '',\n    fechaNacimiento: '',\n    tutoriales: []\n  });\n\n  const [availableTutorials, setAvailableTutorials] = useState([]);\n  const [selectedTutorials, setSelectedTutorials] = useState([]);\n  const [showTutorialModal, setShowTutorialModal] = useState(false);\n  const history = useHistory();\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    TutorialDataService.getAllTutorials()\n      .then((response) => {\n        setAvailableTutorials(response.data);\n      })\n      .catch((error) => {\n        console.error('Error al cargar tutoriales:', error);\n      });\n  }, []);\n\n  const agregarPersona = (e) => {\n    e.preventDefault();\n\n    if (!persona.nombre || !persona.apellido || !persona.direccion || !persona.codigoPostal || !persona.ciudad || !persona.fechaNacimiento) {\n      setErrorMessage(\"Error: Todos los campos son obligatorios.\");\n      return;\n    }\n\n    const personaData = { ...persona, tutoriales: selectedTutorials.map(tut => tut.title) };\n\n    AgendaDataService.createPersona(personaData)\n      .then((response) => {\n        history.push(\"/\");\n        console.log('Persona agregada:', response.data);\n      })\n      .catch((error) => {\n        console.error('Error al agregar persona:', error);\n      });\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setPersona({ ...persona, [name]: value });\n  };\n\n  const toggleTutorialSelection = (tutorialId) => {\n    const tutorial = availableTutorials.find(tut => tut.id === tutorialId);\n    if (tutorial) {\n      if (selectedTutorials.some(tut => tut.id === tutorialId)) {\n        setSelectedTutorials(selectedTutorials.filter(tut => tut.id !== tutorialId));\n      } else {\n        setSelectedTutorials([...selectedTutorials, tutorial]);\n      }\n    }\n  };\n\n  const openTutorialModal = () => setShowTutorialModal(true);\n  const closeTutorialModal = () => setShowTutorialModal(false);\n\n  return (\n    <Container className=\"contenedor-formulario\">\n      <Card className=\"formulario-card\">\n        <h3 className=\"titulo-formulario\">Añadir Persona</h3>\n\n        <Form onSubmit={agregarPersona}>\n          <Row className=\"mb-4\">\n            <Form.Group as={Col} controlId=\"nombre\">\n              <Form.Label>Nombre</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce nombre\" name=\"nombre\" value={persona.nombre} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n            <Form.Group as={Col} controlId=\"apellido\">\n              <Form.Label>Apellido</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce apellido\" name=\"apellido\" value={persona.apellido} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n          </Row>\n\n          <Form.Group controlId=\"direccion\" className=\"mb-4\">\n            <Form.Label>Dirección</Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Introduce dirección\" name=\"direccion\" value={persona.direccion} onChange={handleChange} className=\"form-control-custom\" />\n          </Form.Group>\n\n          <Row className=\"mb-4\">\n            <Form.Group as={Col} controlId=\"codigoPostal\">\n              <Form.Label>Código Postal</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce código postal\" name=\"codigoPostal\" value={persona.codigoPostal} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n            <Form.Group as={Col} controlId=\"ciudad\">\n              <Form.Label>Ciudad</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Introduce ciudad\" name=\"ciudad\" value={persona.ciudad} onChange={handleChange} className=\"form-control-custom\" />\n            </Form.Group>\n          </Row>\n\n          <Form.Group controlId=\"fechaNacimiento\" className=\"mb-4\">\n            <Form.Label>Fecha de Nacimiento</Form.Label>\n            <Form.Control type=\"date\" name=\"fechaNacimiento\" value={persona.fechaNacimiento} onChange={handleChange} className=\"form-control-custom\" />\n          </Form.Group>\n\n          <Form.Group className=\"mb-4\">\n            <Form.Label>Tutoriales asignados</Form.Label>\n            <div>{selectedTutorials.length > 0 ? `Seleccionados: ${selectedTutorials.map(tut => tut.title).join(\", \")}` : \"Ningún tutorial seleccionado\"}</div>\n            <Button className=\"button-custom mt-2\" onClick={openTutorialModal}>Seleccionar Tutoriales</Button>\n          </Form.Group>\n\n          <Button type=\"submit\" className=\"boton-enviar\">Añadir</Button>\n          {errorMessage && (\n            <Alert variant=\"danger\" className='mt-4'>\n              <strong>{errorMessage}</strong>\n            </Alert>\n          )}\n        </Form>\n      </Card>\n\n      {/* Modal de selección de tutoriales con animación */}\n      <CSSTransition\n        in={showTutorialModal}\n        timeout={300}\n        classNames=\"fade\"\n        unmountOnExit\n      >\n         <Modal show={showTutorialModal} onHide={closeTutorialModal} centered>\n               <Modal.Header closeButton>\n                 <Modal.Title>Seleccionar Tutoriales</Modal.Title>\n               </Modal.Header>\n               <Modal.Body>\n                  <div className=\"tutorials-grid\">\n                    {availableTutorials.map((tutorial) => (\n                      <div\n                        key={tutorial.id}\n                        className={`tutorial-card ${selectedTutorials.some(tut => tut.id === tutorial.id) ? \"selected\" : \"\"}`}\n                        onClick={() => toggleTutorialSelection(tutorial.id)}\n                        style={{\n                          border: \"1px solid #ddd\",\n                          borderRadius: \"10px\",\n                          padding: \"10px\",\n                          marginBottom: \"10px\",\n                          display: \"flex\",\n                          alignItems: \"center\",\n                          cursor: \"pointer\",\n                          transition: \"0.3s\",\n                          backgroundColor: selectedTutorials.some(tut => tut.id === tutorial.id) ? \"#f0f8ff\" : \"#fff\"\n                        }}\n                      >\n                        <img\n                          src={tutorial.url || \"https://via.placeholder.com/80\"} // Imagen por defecto si no hay URL\n                          alt={tutorial.title}\n                          style={{ width: \"80px\", height: \"80px\", borderRadius: \"8px\", marginRight: \"10px\", objectFit: \"cover\" }}\n                        />\n                        <div>\n                          <h5 style={{ margin: 0, fontSize: \"16px\" }}>{tutorial.title}</h5>\n                          <p style={{ fontSize: \"14px\", color: \"#666\", margin: \"5px 0 0\" }}>\n                            {tutorial.description || \"Sin descripción\"}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                        </Modal.Body>\n                    <Modal.Footer>\n                      <Button variant=\"primary\" onClick={closeTutorialModal}>\n                        Confirmar selección\n                      </Button>\n                    </Modal.Footer>\n                  </Modal>\n      </CSSTransition>\n    </Container>\n  );\n}\n\nexport default Añadir;\n"]},"metadata":{},"sourceType":"module"}