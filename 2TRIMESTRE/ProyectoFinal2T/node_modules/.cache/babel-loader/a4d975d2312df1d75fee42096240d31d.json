{"ast":null,"code":"var _jsxFileName = \"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Card, Button, Container, Row, Col, Form, Collapse, ProgressBar } from \"react-bootstrap\";\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\n\nconst Inicio = () => {\n  const [personas, setPersonas] = useState([]);\n  const [searchPersona, setSearchPersona] = useState(\"\");\n  const [expandedIndex, setExpandedIndex] = useState(null);\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const userContext = useContext(UserContext);\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = e => {\n    setSearchPersona(e.target.value);\n  };\n\n  const togglePersonaDetails = index => {\n    setExpandedIndex(expandedIndex === index ? null : index);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas().then(response => {\n      setPersonas(response.data);\n      updateProgress(response.data.length);\n    }).catch(e => console.log(e));\n  };\n\n  const updateProgress = total => {\n    const maxPersonas = 50;\n    setProgress(Math.min(total / maxPersonas * 100, 100));\n  };\n\n  const removePersona = persona => {\n    if (!persona || !persona.id) {\n      console.error(\"Persona o persona.id no válidos\", persona);\n      return;\n    }\n\n    AgendaDataService.deletePersona(persona.id).then(() => retrievePersonas()).catch(e => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      retrievePersonas();\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona).then(response => setPersonas(response.data)).catch(e => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  return React.createElement(Container, {\n    className: \"mt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Progreso de Tutoriales\"), React.createElement(ProgressBar, {\n    animated: true,\n    now: progress,\n    label: `${Math.round(progress)}%`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }))), React.createElement(Row, {\n    className: \"mb-3 align-items-center buscador-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"d-flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Buscar por nombre\",\n    value: searchPersona,\n    onChange: onChangeSearchPersona,\n    className: \"form-control-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(Button, {\n    variant: \"primary\",\n    size: \"sm\",\n    className: \"buscador-btn\",\n    onClick: searchPersonaFunction,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Buscar\")))), React.createElement(Row, {\n    className: \"mt-2 cartas-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, personas.map((persona, index) => {\n    var _persona$tutoriales;\n\n    return React.createElement(Col, {\n      md: 5,\n      lg: 3,\n      className: \"mb-3\",\n      key: persona.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: `h-100 p-3 ${selectedIndex === index ? \"border-primary\" : \"\"}`,\n      onClick: () => setSelectedIndex(selectedIndex === index ? null : index),\n      style: {\n        cursor: \"pointer\",\n        fontFamily: \"'Poppins', sans-serif\",\n        minHeight: \"250px\",\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      className: \"d-flex flex-column justify-content-center align-items-center\",\n      style: {\n        height: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      style: {\n        fontSize: \"1.5rem\",\n        fontWeight: \"600\",\n        textAlign: \"center\",\n        marginBottom: \"1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, persona.nombre, \" \", persona.apellido), selectedIndex === index && React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      onClick: e => {\n        e.stopPropagation();\n        togglePersonaDetails(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, expandedIndex === index ? \"Ocultar Detalles\" : \"Ver Detalles\"), React.createElement(Collapse, {\n      in: expandedIndex === index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Direcci\\xF3n:\"), \" \", persona.direccion), React.createElement(\"div\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"C\\xF3digo Postal:\"), \" \", persona.codigoPostal), React.createElement(\"div\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Ciudad:\"), \" \", persona.ciudad), React.createElement(\"div\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Fecha de Nacimiento:\"), \" \", persona.fechaNacimiento), React.createElement(\"div\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Tutoriales:\"), \" \", ((_persona$tutoriales = persona.tutoriales) === null || _persona$tutoriales === void 0 ? void 0 : _persona$tutoriales.length) > 0 ? persona.tutoriales.join(\", \") : \"Ninguno\"), React.createElement(\"div\", {\n      className: \"button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, !userContext ? \"\" : React.createElement(Link, {\n      to: `/editar/${persona.id}`,\n      className: \"btn btn-sm square-btn mt-2\",\n      style: btnStyle(\"#ffc107\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: editar,\n      alt: \"Editar\",\n      className: \"icon-btn\",\n      style: iconStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), !userContext ? \"\" : React.createElement(Button, {\n      variant: \"danger\",\n      className: \"btn-sm square-btn mt-2\",\n      onClick: e => {\n        e.stopPropagation();\n        removePersona(persona);\n      },\n      style: btnStyle(\"#d32f2f\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: borrar,\n      alt: \"Eliminar\",\n      className: \"icon-btn\",\n      style: iconStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    })), React.createElement(Link, {\n      to: {\n        pathname: `/tutoriales/`,\n        state: {\n          tutoriales: persona.tutoriales || []\n        }\n      },\n      className: \"btn btn-sm square-btn mt-2\",\n      style: btnStyle(\"#4caf50\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: informacion,\n      alt: \"Tutoriales\",\n      className: \"icon-btn\",\n      style: iconStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }))))))));\n  })));\n};\n\nconst btnStyle = bgColor => ({\n  backgroundColor: bgColor,\n  border: \"none\",\n  width: \"50px\",\n  height: \"50px\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nconst iconStyle = {\n  width: \"80%\",\n  height: \"80%\",\n  objectFit: \"contain\"\n};\nexport default Inicio;","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js"],"names":["React","useContext","useState","useEffect","AgendaDataService","Link","Card","Button","Container","Row","Col","Form","Collapse","ProgressBar","informacion","editar","borrar","UserContext","Inicio","personas","setPersonas","searchPersona","setSearchPersona","expandedIndex","setExpandedIndex","selectedIndex","setSelectedIndex","progress","setProgress","userContext","retrievePersonas","onChangeSearchPersona","e","target","value","togglePersonaDetails","index","getAllPersonas","then","response","data","updateProgress","length","catch","console","log","total","maxPersonas","Math","min","removePersona","persona","id","error","deletePersona","searchPersonaFunction","trim","findByNombre","round","map","cursor","fontFamily","minHeight","textAlign","height","fontSize","fontWeight","marginBottom","nombre","apellido","stopPropagation","direccion","codigoPostal","ciudad","fechaNacimiento","tutoriales","join","btnStyle","iconStyle","pathname","state","bgColor","backgroundColor","border","width","display","justifyContent","alignItems","objectFit"],"mappings":"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","sourcesContent":["import React, { useContext,useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Card, Button, Container, Row, Col, Form, Collapse, ProgressBar } from \"react-bootstrap\";\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\n\n\nconst Inicio = () => {\n  const [personas, setPersonas] = useState([]);\n  const [searchPersona, setSearchPersona] = useState(\"\");\n  const [expandedIndex, setExpandedIndex] = useState(null);\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const userContext = useContext(UserContext);\n\n\n\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = (e) => {\n    setSearchPersona(e.target.value);\n  };\n\n  const togglePersonaDetails = (index) => {\n    setExpandedIndex(expandedIndex === index ? null : index);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas()\n      .then((response) => {\n        setPersonas(response.data);\n        updateProgress(response.data.length);\n      })\n      .catch((e) => console.log(e));\n  };\n\n  const updateProgress = (total) => {\n    const maxPersonas = 50;\n    setProgress(Math.min((total / maxPersonas) * 100, 100));\n  };\n\n  const removePersona = (persona) => {\n    if (!persona || !persona.id) {\n      console.error(\"Persona o persona.id no válidos\", persona);\n      return;\n    }\n\n    AgendaDataService.deletePersona(persona.id)\n      .then(() => retrievePersonas())\n      .catch((e) => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      retrievePersonas();\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona)\n      .then((response) => setPersonas(response.data))\n      .catch((e) => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <Row className=\"mb-4\">\n        <Col md={12}>\n          <h4 className=\"text-center\">Progreso de Tutoriales</h4>\n          <ProgressBar animated now={progress} label={`${Math.round(progress)}%`} />\n        </Col>\n      </Row>\n\n      <Row className=\"mb-3 align-items-center buscador-container\">\n        <Col md={12}>\n          <div className=\"d-flex\">\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Buscar por nombre\"\n              value={searchPersona}\n              onChange={onChangeSearchPersona}\n              className=\"form-control-lg\"\n            />\n            <Button variant=\"primary\" size=\"sm\" className=\"buscador-btn\" onClick={searchPersonaFunction}>\n              Buscar\n            </Button>\n          </div>\n        </Col>\n      </Row>\n\n      <Row className=\"mt-2 cartas-container\">\n        {personas.map((persona, index) => (\n          <Col md={5} lg={3} className=\"mb-3\" key={persona.id}>\n            <Card\n              className={`h-100 p-3 ${selectedIndex === index ? \"border-primary\" : \"\"}`}\n              onClick={() => setSelectedIndex(selectedIndex === index ? null : index)}\n              style={{ cursor: \"pointer\", fontFamily: \"'Poppins', sans-serif\", minHeight: \"250px\", textAlign: \"center\" }}\n            >\n              <Card.Body className=\"d-flex flex-column justify-content-center align-items-center\" style={{ height: \"100%\" }}>\n                <Card.Title style={{ fontSize: \"1.5rem\", fontWeight: \"600\", textAlign: \"center\", marginBottom: \"1rem\" }}>\n                  {persona.nombre} {persona.apellido}\n                </Card.Title>\n\n                {selectedIndex === index && (\n                  <Button variant=\"info\" size=\"sm\" onClick={(e) => { e.stopPropagation(); togglePersonaDetails(index); }}>\n                    {expandedIndex === index ? \"Ocultar Detalles\" : \"Ver Detalles\"}\n                  </Button>\n                )}\n\n                <Collapse in={expandedIndex === index}>\n                  <div className=\"mt-3\">\n                    <div className=\"detail-item\"><strong>Dirección:</strong> {persona.direccion}</div>\n                    <div className=\"detail-item\"><strong>Código Postal:</strong> {persona.codigoPostal}</div>\n                    <div className=\"detail-item\"><strong>Ciudad:</strong> {persona.ciudad}</div>\n                    <div className=\"detail-item\"><strong>Fecha de Nacimiento:</strong> {persona.fechaNacimiento}</div>\n                    <div className=\"detail-item\">\n                      <strong>Tutoriales:</strong> {persona.tutoriales?.length > 0 ? persona.tutoriales.join(\", \") : \"Ninguno\"}\n                    </div>\n                    <div className=\"button-container\">\n                    {!userContext ? ( \"\"): \n                      <Link to={`/editar/${persona.id}`} className=\"btn btn-sm square-btn mt-2\" style={btnStyle(\"#ffc107\")}>\n                        <img src={editar} alt=\"Editar\" className=\"icon-btn\" style={iconStyle} />\n                      </Link>}\n                      {!userContext ? ( \"\"): \n                      <Button variant=\"danger\" className=\"btn-sm square-btn mt-2\" onClick={(e) => { e.stopPropagation(); removePersona(persona); }} style={btnStyle(\"#d32f2f\")}>\n                        <img src={borrar} alt=\"Eliminar\" className=\"icon-btn\" style={iconStyle} />\n                      </Button>}\n\n                      <Link to={{ pathname: `/tutoriales/`, state: { tutoriales: persona.tutoriales || [] } }} className=\"btn btn-sm square-btn mt-2\" style={btnStyle(\"#4caf50\")}>\n                        <img src={informacion} alt=\"Tutoriales\" className=\"icon-btn\" style={iconStyle} />\n                      </Link>\n                    </div>\n                  </div>\n                </Collapse>\n              </Card.Body>\n            </Card>\n          </Col>\n        ))}\n      </Row>\n    </Container>\n  );\n};\n\nconst btnStyle = (bgColor) => ({\n  backgroundColor: bgColor,\n  border: \"none\",\n  width: \"50px\",\n  height: \"50px\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n});\n\nconst iconStyle = {\n  width: \"80%\",\n  height: \"80%\",\n  objectFit: \"contain\",\n};\n\nexport default Inicio;\n"]},"metadata":{},"sourceType":"module"}