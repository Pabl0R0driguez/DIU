{"ast":null,"code":"import _slicedToArray from\"/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import AgendaDataService from\"../services/agenda.service\";import{Link}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"../styles/Inicio.css\";import{Modal,Button,Container,Row,Col,Form,Table,ProgressBar}from\"react-bootstrap\";// Importamos ProgressBar\nimport informacion from\"../assets/informacion.png\";import editar from\"../assets/editar.png\";import borrar from\"../assets/borrar.png\";import{UserContext}from\"../provider/UserProvider\";import buscar1 from\"../assets/buscar1.png\";import{motion}from\"framer-motion\";var Inicio=function Inicio(){var _selectedPersona$tuto;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),personas=_useState2[0],setPersonas=_useState2[1];// Personas filtradas que se están mostrando\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allPersonas=_useState4[0],setAllPersonas=_useState4[1];// Todas las personas de la base de datos\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),searchPersona=_useState6[0],setSearchPersona=_useState6[1];// Valor de la búsqueda\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedPersona=_useState8[0],setSelectedPersona=_useState8[1];var _useState9=useState(\"informacion\"),_useState10=_slicedToArray(_useState9,2),modalState=_useState10[0],setModalState=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),tutorials=_useState12[0],setTutorials=_useState12[1];var userContext=useContext(UserContext);// Total de personas para la barra de progreso (fijo en 50)\nvar totalPersonas=50;useEffect(function(){retrievePersonas();},[]);var onChangeSearchPersona=function onChangeSearchPersona(e){setSearchPersona(e.target.value);};var retrievePersonas=function retrievePersonas(){AgendaDataService.getAllPersonas().then(function(response){setAllPersonas(response.data);// Guardamos todas las personas obtenidas\nsetPersonas(response.data);// Inicializamos la lista de personas\n}).catch(function(e){return console.log(e);});};var searchPersonaFunction=function searchPersonaFunction(){if(!searchPersona.trim()){setPersonas(allPersonas);// Si no hay filtro, restauramos la lista completa\nreturn;}AgendaDataService.findByNombre(searchPersona).then(function(response){return setPersonas(response.data);})// Actualizamos la lista filtrada\n.catch(function(e){return console.error(\"Error en la búsqueda:\",e);});};var handlePersonaClick=function handlePersonaClick(persona){setSelectedPersona(persona);setModalState(\"informacion\");};var closeModal=function closeModal(){setSelectedPersona(null);};var removePersona=function removePersona(persona){AgendaDataService.deletePersona(persona.id).then(function(){return retrievePersonas();}).catch(function(e){return console.error(\"Error al eliminar la persona:\",e);});};var btnStyle=function btnStyle(bgColor){return{backgroundColor:bgColor,border:\"none\",width:\"50px\",height:\"50px\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"};};var iconStyle={width:\"80%\",height:\"80%\",objectFit:\"contain\"};var showTutorials=function showTutorials(persona){setTutorials(persona.tutoriales||[]);setModalState(\"tutoriales\");};var volverTutorialModal=function volverTutorialModal(){setModalState(\"informacion\");};var cerrarTutorialModal=function cerrarTutorialModal(){setModalState(\"\");};var progreso=allPersonas.length/totalPersonas*100;return React.createElement(\"div\",{className:\"fondo-container\"},React.createElement(Container,{id:\"contenido\",className:\"mt-5\"},React.createElement(Row,{className:\"mb-3 align-items-center buscador-container\"},React.createElement(Col,{md:12},React.createElement(\"div\",{className:\"d-flex\"},React.createElement(Form.Control,{type:\"text\",placeholder:\"Buscar por nombre\",value:searchPersona,onChange:onChangeSearchPersona,className:\"modern-input\"}),React.createElement(Button,{variant:\"link\",onClick:searchPersonaFunction,className:\"search-btn\"},React.createElement(\"img\",{src:buscar1,alt:\"Buscar\",className:\"search-icon\"}))))),React.createElement(Row,{className:\"mb-3 progress-container\"},React.createElement(Col,{md:8},React.createElement(ProgressBar,{now:progreso,label:\"\".concat(Math.round(progreso),\"%\")}))),React.createElement(Row,{className:\"justify-content-center\"},React.createElement(Col,{xs:12,md:8,lg:6,className:\"text-center\"},React.createElement(\"h2\",{className:\"contactos-title\"},\"Contactos\"))),React.createElement(Row,{className:\"mt-2 tabla-container\"},React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"modern-table\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Nombre\"),React.createElement(\"th\",null,\"Apellido\"))),React.createElement(\"tbody\",null,personas.map(function(persona){return React.createElement(\"tr\",{key:persona.id,onClick:function onClick(){return handlePersonaClick(persona);},style:{cursor:\"pointer\"}},React.createElement(\"td\",null,persona.nombre),React.createElement(\"td\",null,persona.apellido));})))),modalState===\"informacion\"&&selectedPersona&&React.createElement(motion.div,{initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.8},transition:{duration:0.5,ease:\"easeOut\"},className:\"custom-modal-container\"},React.createElement(Modal,{show:true,onHide:closeModal,className:\"custom-modal\"},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,\"Detalles de \",selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.nombre,\" \",selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.apellido)),React.createElement(Modal.Body,null,React.createElement(\"div\",{className:\"detail-item\"},React.createElement(\"strong\",null,\"Direcci\\xF3n:\"),\" \",selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.direccion),React.createElement(\"div\",{className:\"detail-item\"},React.createElement(\"strong\",null,\"C\\xF3digo Postal:\"),\" \",selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.codigoPostal),React.createElement(\"div\",{className:\"detail-item\"},React.createElement(\"strong\",null,\"Ciudad:\"),\" \",selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.ciudad),React.createElement(\"div\",{className:\"detail-item\"},React.createElement(\"strong\",null,\"Fecha de Nacimiento:\"),\" \",selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.fechaNacimiento),React.createElement(\"div\",{className:\"detail-item\"},React.createElement(\"strong\",null,\"Tutoriales:\"),\" \",(selectedPersona===null||selectedPersona===void 0?void 0:(_selectedPersona$tuto=selectedPersona.tutoriales)===null||_selectedPersona$tuto===void 0?void 0:_selectedPersona$tuto.length)>0?selectedPersona===null||selectedPersona===void 0?void 0:selectedPersona.tutoriales.join(\", \"):\"Ninguno\")),React.createElement(Modal.Footer,null,userContext&&selectedPersona&&selectedPersona.id&&React.createElement(React.Fragment,null,React.createElement(Link,{to:\"/editar/\".concat(selectedPersona.id),className:\"btn btn-sm square-btn\",style:btnStyle(\"#ffc107\")},React.createElement(\"img\",{src:editar,alt:\"Editar\",className:\"icon-btn\",style:iconStyle})),React.createElement(Button,{variant:\"danger\",className:\"btn-sm square-btn\",onClick:function onClick(){removePersona(selectedPersona);closeModal();},style:btnStyle(\"#d32f2f\")},React.createElement(\"img\",{src:borrar,alt:\"Eliminar\",className:\"icon-btn\",style:iconStyle}))),React.createElement(Button,{variant:\"link\",onClick:function onClick(){return showTutorials(selectedPersona);},style:btnStyle(\"#4caf50\")},React.createElement(\"img\",{src:informacion,alt:\"Informaci\\xF3n\",className:\"icon-btn\",style:iconStyle}))))),modalState===\"tutoriales\"&&React.createElement(motion.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:-300},transition:{duration:0.5,ease:\"easeInOut\"},className:\"tutorial-modal-container\"},React.createElement(Modal,{show:true,onHide:cerrarTutorialModal},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,\"Tutoriales\")),React.createElement(Modal.Body,null,tutorials.length>0?React.createElement(\"ul\",null,tutorials.map(function(tutorial,index){return React.createElement(\"li\",{key:index},tutorial);})):React.createElement(\"p\",null,\"No hay tutoriales disponibles.\")),React.createElement(Modal.Footer,null,React.createElement(Button,{variant:\"primary\",onClick:volverTutorialModal,className:\"btn-volver-cerrar\"},\"Volver\"),React.createElement(Button,{variant:\"danger\",onClick:cerrarTutorialModal,className:\"btn-volver-cerrar\"},\"Cerrar\"))))));};export default Inicio;","map":{"version":3,"sources":["/media/pablo/137624ed-270b-478a-b945-4e982e255fb2/pablo/DIU/2TRIMESTRE/ProyectoFinal2T/FrontAgendav2(Final)/src/components/Inicio.js"],"names":["React","useContext","useState","useEffect","AgendaDataService","Link","Modal","Button","Container","Row","Col","Form","Table","ProgressBar","informacion","editar","borrar","UserContext","buscar1","motion","Inicio","personas","setPersonas","allPersonas","setAllPersonas","searchPersona","setSearchPersona","selectedPersona","setSelectedPersona","modalState","setModalState","tutorials","setTutorials","userContext","totalPersonas","retrievePersonas","onChangeSearchPersona","e","target","value","getAllPersonas","then","response","data","catch","console","log","searchPersonaFunction","trim","findByNombre","error","handlePersonaClick","persona","closeModal","removePersona","deletePersona","id","btnStyle","bgColor","backgroundColor","border","width","height","display","justifyContent","alignItems","iconStyle","objectFit","showTutorials","tutoriales","volverTutorialModal","cerrarTutorialModal","progreso","length","Math","round","map","cursor","nombre","apellido","opacity","scale","duration","ease","direccion","codigoPostal","ciudad","fechaNacimiento","join","x","tutorial","index"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport AgendaDataService from \"../services/agenda.service\";\nimport { Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Inicio.css\";\nimport { Modal, Button, Container, Row, Col, Form, Table, ProgressBar } from \"react-bootstrap\"; // Importamos ProgressBar\nimport informacion from \"../assets/informacion.png\";\nimport editar from \"../assets/editar.png\";\nimport borrar from \"../assets/borrar.png\";\nimport { UserContext } from \"../provider/UserProvider\";\nimport buscar1 from \"../assets/buscar1.png\";\nimport { motion } from \"framer-motion\";\n\nconst Inicio = () => {\n  const [personas, setPersonas] = useState([]); // Personas filtradas que se están mostrando\n  const [allPersonas, setAllPersonas] = useState([]); // Todas las personas de la base de datos\n  const [searchPersona, setSearchPersona] = useState(\"\"); // Valor de la búsqueda\n  const [selectedPersona, setSelectedPersona] = useState(null);\n  const [modalState, setModalState] = useState(\"informacion\");\n  const [tutorials, setTutorials] = useState([]);\n  const userContext = useContext(UserContext);\n\n  // Total de personas para la barra de progreso (fijo en 50)\n  const totalPersonas = 50; \n\n  useEffect(() => {\n    retrievePersonas();\n  }, []);\n\n  const onChangeSearchPersona = (e) => {\n    setSearchPersona(e.target.value);\n  };\n\n  const retrievePersonas = () => {\n    AgendaDataService.getAllPersonas()\n      .then((response) => {\n        setAllPersonas(response.data); // Guardamos todas las personas obtenidas\n        setPersonas(response.data); // Inicializamos la lista de personas\n      })\n      .catch((e) => console.log(e));\n  };\n\n  const searchPersonaFunction = () => {\n    if (!searchPersona.trim()) {\n      setPersonas(allPersonas); // Si no hay filtro, restauramos la lista completa\n      return;\n    }\n\n    AgendaDataService.findByNombre(searchPersona)\n      .then((response) => setPersonas(response.data)) // Actualizamos la lista filtrada\n      .catch((e) => console.error(\"Error en la búsqueda:\", e));\n  };\n\n  const handlePersonaClick = (persona) => {\n    setSelectedPersona(persona);\n    setModalState(\"informacion\");\n  };\n\n  const closeModal = () => {\n    setSelectedPersona(null);\n  };\n\n  const removePersona = (persona) => {\n    AgendaDataService.deletePersona(persona.id)\n      .then(() => retrievePersonas())\n      .catch((e) => console.error(\"Error al eliminar la persona:\", e));\n  };\n\n  const btnStyle = (bgColor) => ({\n    backgroundColor: bgColor,\n    border: \"none\",\n    width: \"50px\",\n    height: \"50px\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  });\n\n  const iconStyle = {\n    width: \"80%\",\n    height: \"80%\",\n    objectFit: \"contain\",\n  };\n\n  const showTutorials = (persona) => {\n    setTutorials(persona.tutoriales || []);\n    setModalState(\"tutoriales\");\n  };\n\n  const volverTutorialModal = () => {\n    setModalState(\"informacion\");\n  };\n\n  const cerrarTutorialModal = () => {\n    setModalState(\"\");\n  };\n\n  const progreso = (allPersonas.length / totalPersonas) * 100;\n\n  return (\n    <div className=\"fondo-container\">\n      <Container id=\"contenido\" className=\"mt-5\">\n       \n\n   \n\n\n        {/* Buscar personas */}\n        <Row className=\"mb-3 align-items-center buscador-container\">\n          <Col md={12}>\n            <div className=\"d-flex\">\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Buscar por nombre\"\n                value={searchPersona}\n                onChange={onChangeSearchPersona}\n                className=\"modern-input\"\n              />\n              <Button variant=\"link\" onClick={searchPersonaFunction} className=\"search-btn\">\n                <img src={buscar1} alt=\"Buscar\" className=\"search-icon\" />\n              </Button>\n            </div>\n          </Col>\n        </Row>\n\n         {/* Barra de progreso */}\n         <Row className=\"mb-3 progress-container\">\n          <Col md={8}>\n            <ProgressBar now={progreso} label={`${Math.round(progreso)}%`} />\n          </Col>\n        </Row>\n\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={8} lg={6} className=\"text-center\">\n            <h2 className=\"contactos-title\">Contactos</h2>\n          </Col>\n        </Row>\n\n\n        <Row className=\"mt-2 tabla-container\">\n          <Table striped bordered hover responsive className=\"modern-table\">\n            <thead>\n              <tr>\n                <th>Nombre</th>\n                <th>Apellido</th>\n              </tr>\n            </thead>\n            <tbody>\n              {personas.map((persona) => (\n                <tr\n                  key={persona.id}\n                  onClick={() => handlePersonaClick(persona)}\n                  style={{ cursor: \"pointer\" }}\n                >\n                  <td>{persona.nombre}</td>\n                  <td>{persona.apellido}</td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </Row>\n\n        {/* Modal de Información de la Persona */}\n        {modalState === \"informacion\" && selectedPersona && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.8 }}\n            transition={{ duration: 0.5, ease: \"easeOut\" }}\n            className=\"custom-modal-container\"\n          >\n            <Modal show={true} onHide={closeModal} className=\"custom-modal\">\n              <Modal.Header closeButton>\n                <Modal.Title>Detalles de {selectedPersona?.nombre} {selectedPersona?.apellido}</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <div className=\"detail-item\"><strong>Dirección:</strong> {selectedPersona?.direccion}</div>\n                <div className=\"detail-item\"><strong>Código Postal:</strong> {selectedPersona?.codigoPostal}</div>\n                <div className=\"detail-item\"><strong>Ciudad:</strong> {selectedPersona?.ciudad}</div>\n                <div className=\"detail-item\"><strong>Fecha de Nacimiento:</strong> {selectedPersona?.fechaNacimiento}</div>\n                <div className=\"detail-item\">\n                  <strong>Tutoriales:</strong> {selectedPersona?.tutoriales?.length > 0 ? selectedPersona?.tutoriales.join(\", \") : \"Ninguno\"}\n                </div>\n              </Modal.Body>\n              <Modal.Footer>\n                {userContext && selectedPersona && selectedPersona.id && (\n                  <>\n                    <Link to={`/editar/${selectedPersona.id}`} className=\"btn btn-sm square-btn\" style={btnStyle(\"#ffc107\")}>\n                      <img src={editar} alt=\"Editar\" className=\"icon-btn\" style={iconStyle} />\n                    </Link>\n                    <Button variant=\"danger\" className=\"btn-sm square-btn\" onClick={() => { removePersona(selectedPersona); closeModal(); }} style={btnStyle(\"#d32f2f\")}>\n                      <img src={borrar} alt=\"Eliminar\" className=\"icon-btn\" style={iconStyle} />\n                    </Button>\n                  </>\n                )}\n                <Button\n                  variant=\"link\"\n                  onClick={() => showTutorials(selectedPersona)}\n                  style={btnStyle(\"#4caf50\")}\n                >\n                  <img src={informacion} alt=\"Información\" className=\"icon-btn\" style={iconStyle} />\n                </Button>\n              </Modal.Footer>\n            </Modal>\n          </motion.div>\n        )}\n\n        {/* Modal de Tutoriales */}\n        {modalState === \"tutoriales\" && (\n          <motion.div\n            initial={{ opacity: 0, x: 300 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -300 }}\n            transition={{ duration: 0.5, ease: \"easeInOut\" }}\n            className=\"tutorial-modal-container\"\n          >\n            <Modal show={true} onHide={cerrarTutorialModal}>\n              <Modal.Header closeButton>\n                <Modal.Title>Tutoriales</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                {tutorials.length > 0 ? (\n                  <ul>\n                    {tutorials.map((tutorial, index) => (\n                      <li key={index}>{tutorial}</li>\n                    ))}\n                  </ul>\n                ) : (\n                  <p>No hay tutoriales disponibles.</p>\n                )}\n              </Modal.Body>\n              <Modal.Footer>\n                <Button variant=\"primary\" onClick={volverTutorialModal} className=\"btn-volver-cerrar\">\n                  Volver\n                </Button>\n                <Button variant=\"danger\" onClick={cerrarTutorialModal} className=\"btn-volver-cerrar\">\n                  Cerrar\n                </Button>\n              </Modal.Footer>\n            </Modal>\n          </motion.div>\n        )}\n      </Container>\n    </div>\n  );\n};\n\nexport default Inicio;\n"]},"metadata":{},"sourceType":"module"}